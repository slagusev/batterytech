<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BatteryTech SDK: Networking</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="batterytech_logo_tm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">BatteryTech SDK
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">Mobile Development Platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Networking</div>  </div>
</div><!--header-->
<div class="contents">

<p>POSIX Socket-based network support.  
<a href="#details">More...</a></p>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Most platforms natively support standard BSD or POSIX sockets but for those that don't, simply including <a class="el" href="platformgeneral_8h.html">platformgeneral.h</a> will include, define or redefine macros to support POSIX. Applications can count on standard functions such as socket, bind, setsockopt, send, recv, inet_pton, inet_ntop, getaddrinfo and getnameinfo</p>
<p>A few specific functions that are not defined as part of the POSIX sockets specification are implemented as _platform functions and documented here.</p>
<p>For more information on using Berkeley/POSIX sockets, please visit the wikipedia link in the see also section.</p>
<p>BatteryTech includes a default implementation of message-based client/host game networking in the following classes: <a class="el" href="class_battery_tech_1_1_network_manager.html">BatteryTech::NetworkManager</a>, <a class="el" href="class_battery_tech_1_1_game_connection.html">BatteryTech::GameConnection</a>, <a class="el" href="class_battery_tech_1_1_network_message.html">BatteryTech::NetworkMessage</a></p>
<dl class="section see"><dt>See also:</dt><dd><a href="http://en.wikipedia.org/wiki/Berkeley_socket">http://en.wikipedia.org/wiki/Berkeley_socket</a> </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html">BatteryTech::NetworkManager</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peer Discovery and Host/Client networking.  <a href="class_battery_tech_1_1_network_manager.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_message.html">BatteryTech::NetworkMessage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A Network Message.  <a href="class_battery_tech_1_1_network_message.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_message_factory.html">BatteryTech::NetworkMessageFactory</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An abstract message factory.  <a href="class_battery_tech_1_1_network_message_factory.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_message_listener.html">BatteryTech::NetworkMessageListener</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implement this to receive network messages.  <a href="class_battery_tech_1_1_network_message_listener.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_status_listener.html">BatteryTech::NetworkStatusListener</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implement this to listen for network status changesUse in conjunction with <a class="el" href="class_battery_tech_1_1_network_manager.html" title="Peer Discovery and Host/Client networking.">NetworkManager</a>.  <a href="class_battery_tech_1_1_network_status_listener.html#details">More...</a><br/></td></tr>
<tr class="memitem:gae9f3a4ef82abb9d4a8dd139a345d8abf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___networking.html#gae9f3a4ef82abb9d4a8dd139a345d8abf">_platform_init_network</a> ()</td></tr>
<tr class="memdesc:gae9f3a4ef82abb9d4a8dd139a345d8abf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes networking for platforms that need it.  <a href="#gae9f3a4ef82abb9d4a8dd139a345d8abf"></a><br/></td></tr>
<tr class="memitem:ga7241fdd7d05e9e523cc7d9d163b6e2c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___networking.html#ga7241fdd7d05e9e523cc7d9d163b6e2c6">_platform_release_network</a> ()</td></tr>
<tr class="memdesc:ga7241fdd7d05e9e523cc7d9d163b6e2c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases networking for platforms that need it.  <a href="#ga7241fdd7d05e9e523cc7d9d163b6e2c6"></a><br/></td></tr>
<tr class="memitem:ga22b1fe367a4ceecca0d85fa6da32f052"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___networking.html#ga22b1fe367a4ceecca0d85fa6da32f052">_platform_make_non_blocking</a> (SOCKET socket)</td></tr>
<tr class="memdesc:ga22b1fe367a4ceecca0d85fa6da32f052"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a socket non-blocking.  <a href="#ga22b1fe367a4ceecca0d85fa6da32f052"></a><br/></td></tr>
<tr class="memitem:ga5974178e7dd82c907f4fd0ba54125c8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34">S32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___networking.html#ga5974178e7dd82c907f4fd0ba54125c8e">_platform_get_socket_last_error</a> ()</td></tr>
<tr class="memdesc:ga5974178e7dd82c907f4fd0ba54125c8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the last socket error state.  <a href="#ga5974178e7dd82c907f4fd0ba54125c8e"></a><br/></td></tr>
<tr class="memitem:ga26f28a6df9f892b175c9bc02b46bf2cb"><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___networking.html#ga26f28a6df9f892b175c9bc02b46bf2cb">_platform_get_ifaddrs</a> (int *<a class="el" href="glext_8h.html#a4e867eee5910f6b2df6123b47ab70dae">count</a>)</td></tr>
<tr class="memdesc:ga26f28a6df9f892b175c9bc02b46bf2cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a list of network interface addresses.  <a href="#ga26f28a6df9f892b175c9bc02b46bf2cb"></a><br/></td></tr>
<tr class="memitem:ga90e415c4cce7a7e171b21dee1e86e805"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___networking.html#ga90e415c4cce7a7e171b21dee1e86e805">_platform_free_ifaddrs</a> (char **ifaddrs, int <a class="el" href="glext_8h.html#a4e867eee5910f6b2df6123b47ab70dae">count</a>)</td></tr>
<tr class="memdesc:ga90e415c4cce7a7e171b21dee1e86e805"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the list of interface addresses acquired by _platform_get_ifaddrs.  <a href="#ga90e415c4cce7a7e171b21dee1e86e805"></a><br/></td></tr>
<tr class="memitem:ga294867ba9d7ff47e39d421134d8e12ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___networking.html#ga294867ba9d7ff47e39d421134d8e12ab">get_in_addr</a> (struct sockaddr *sa)</td></tr>
<tr class="memdesc:ga294867ba9d7ff47e39d421134d8e12ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the internet address of a sockaddr structure.  <a href="#ga294867ba9d7ff47e39d421134d8e12ab"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga90e415c4cce7a7e171b21dee1e86e805"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> _platform_free_ifaddrs </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>ifaddrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">ifaddrs</td><td>The list of ifaddrs acquired by <a class="el" href="group___networking.html#ga26f28a6df9f892b175c9bc02b46bf2cb">_platform_get_ifaddrs</a> </td></tr>
    <tr><td class="paramname">count</td><td>The count set by <a class="el" href="group___networking.html#ga26f28a6df9f892b175c9bc02b46bf2cb">_platform_get_ifaddrs</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga26f28a6df9f892b175c9bc02b46bf2cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** _platform_get_ifaddrs </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>You must free the list returned by <a class="el" href="group___networking.html#ga90e415c4cce7a7e171b21dee1e86e805">_platform_free_ifaddrs</a> when done</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>OUT - number of ifaddrs </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>a list of socket interface addresses </dd></dl>

</div>
</div>
<a class="anchor" id="ga5974178e7dd82c907f4fd0ba54125c8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34">S32</a> _platform_get_socket_last_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns:</dt><dd>An error code or EWOULDBLOCK if socket is non-blocking </dd></dl>

</div>
</div>
<a class="anchor" id="gae9f3a4ef82abb9d4a8dd139a345d8abf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> _platform_init_network </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is called by <a class="el" href="class_battery_tech_1_1_network_manager.html">BatteryTech::NetworkManager</a> but should custom network code be used, this function should always be called before other network functions because it is required by certain platforms such as Windows to initialize sockets before they can be used. </p>

</div>
</div>
<a class="anchor" id="ga22b1fe367a4ceecca0d85fa6da32f052"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> _platform_make_non_blocking </td>
          <td>(</td>
          <td class="paramtype">SOCKET&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>The socket to make non-blocking </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7241fdd7d05e9e523cc7d9d163b6e2c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> _platform_release_network </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is called by <a class="el" href="class_battery_tech_1_1_network_manager.html">BatteryTech::NetworkManager</a> bu should custom network code be used, this function should always be called before application shutdown to release networking resources for certain platforms such as Windows. </p>

</div>
</div>
<a class="anchor" id="ga294867ba9d7ff47e39d421134d8e12ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>* get_in_addr </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr *&#160;</td>
          <td class="paramname"><em>sa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A sockaddr structure is used throughout standard BSD sockets but translating to an internet address is platform-specific.</p>
<p>Here is an example to find the hostname from a packet received via udp: </p>
<div class="fragment"><div class="line">  <span class="keyword">struct </span>sockaddr_storage their_addr;</div>
<div class="line">  recvfrom(udpListenerSocket, <a class="code" href="glext_8h.html#aa3b73d9ca9f2e2396cbeae1ce6ce14be">buf</a>, <a class="code" href="_network_manager_8cpp.html#a13f1b0997650b75647b68dcd0136c886">UDPBUFLEN</a>-1 , 0, (<span class="keyword">struct</span> sockaddr *)&amp;their_addr, &amp;addr_len))</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *hostname = inet_ntop(their_addr.ss_family,</div>
<div class="line">                <a class="code" href="platformgeneral_8cpp.html#a294867ba9d7ff47e39d421134d8e12ab" title="Gets the internet address of a sockaddr structure.">get_in_addr</a>((<span class="keyword">struct</span> sockaddr *)&amp;their_addr),</div>
<div class="line">                <a class="code" href="glext_8h.html#ad585a1393cfa368fa9dc3d8ebff640d5">s</a>, <span class="keyword">sizeof</span> <a class="code" href="glext_8h.html#ad585a1393cfa368fa9dc3d8ebff640d5">s</a>);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">sa</td><td>The socket address to look up </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The internet address of the socket </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 30 2012 21:27:19 for BatteryTech SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1
</small></address>
</body>
</html>
