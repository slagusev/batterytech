<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BatteryTech SDK: BatteryTech::NetworkManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="batterytech_logo_tm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">BatteryTech SDK
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">Mobile Development Platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_battery_tech.html">BatteryTech</a></li><li class="navelem"><a class="el" href="class_battery_tech_1_1_network_manager.html">NetworkManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">BatteryTech::NetworkManager Class Reference<div class="ingroups"><a class="el" href="group___networking.html">Networking</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Peer Discovery and Host/Client networking.  
 <a href="class_battery_tech_1_1_network_manager.html#details">More...</a></p>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_battery_tech_1_1_network_manager.html" title="Peer Discovery and Host/Client networking.">NetworkManager</a> provides a host mode, client mode and some status and message listener hooks. The host starts hosting and when a client begins searching for a host, they will find each other and the data connection will start.</p>
<p>Both Host and Client need to register listeners (normally your game or other class) using <a class="el" href="class_battery_tech_1_1_network_manager.html#aaafe9b6b986ed06f6edeca63342f21a4">setMessageListener</a> and <a class="el" href="class_battery_tech_1_1_network_manager.html#ad2dea02a485e2f38e9451d99124d9bc2">setStatusListener</a><br/>
 Host calls: <a class="el" href="class_battery_tech_1_1_network_manager.html#a10ec39040ec5315e3e42be5e244d29f9">startHosting()</a><br/>
 Client calls: <a class="el" href="class_battery_tech_1_1_network_manager.html#ac8c776e22bb0ff7da158d9919e6369d1">findHost()</a><br/>
 and they will receive callbacks via the <a class="el" href="class_battery_tech_1_1_network_status_listener.html">NetworkStatusListener</a>.</p>
<p>To cancel, they can just call <a class="el" href="class_battery_tech_1_1_network_manager.html#a57f27975f5cd6648e4c43e1cc0fe3167">cancelAndClose()</a> and it will quit. Also if either side quits or network errors occur, the status listener will be called with the new status.</p>
<p>Ports and handshake messages can be all changed in <a class="el" href="_network_manager_8cpp.html">NetworkManager.cpp</a></p>
<p>Once connected, hosts/clients (we'll call them peers here on out) can send each other messages. A message is a custom class that represents one or more pieces of data.</p>
<p>Here is an example <a class="el" href="class_battery_tech_1_1_network_message.html" title="A Network Message.">NetworkMessage</a>:</p>
<div class="fragment"><div class="line"> <span class="comment">// put your different message type constants in your game constants file</span></div>
<div class="line"><span class="preprocessor"> #define NETWORK_MESSAGE_TYPE_GAMESTATE 0</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"> <span class="comment">// GameStateMessage.h</span></div>
<div class="line"> <span class="keyword">class </span>GamestateMessage : <span class="keyword">public</span> NetworkMessage {</div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">        GamestateMessage();</div>
<div class="line">        <span class="keyword">virtual</span> ~GamestateMessage();</div>
<div class="line">        <span class="keyword">virtual</span> <a class="code" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34" title="A signed 32 bit integer.">S32</a> encode(<span class="keywordtype">char</span> *<a class="code" href="glext_8h.html#aa3b73d9ca9f2e2396cbeae1ce6ce14be">buf</a>);</div>
<div class="line">        <span class="keyword">virtual</span> <span class="keywordtype">void</span> decode(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="glext_8h.html#aa3b73d9ca9f2e2396cbeae1ce6ce14be">buf</a>, <a class="code" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34" title="A signed 32 bit integer.">S32</a> <a class="code" href="glext_8h.html#a1499969c13207ed8ab6f796685d4933f">length</a>);</div>
<div class="line">        <a class="code" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34" title="A signed 32 bit integer.">S32</a> <a class="code" href="glext_8h.html#aeb776e5e0b0aff9ecb4c615ec0d92452">level</a>;</div>
<div class="line">        <a class="code" href="primitives_8h.html#acd85e891f8abe13e2e0c5785454972ac" title="An unsigned 8 bit integer.">U8</a> gameState;</div>
<div class="line"> };</div>
<div class="line"></div>
<div class="line"> <span class="comment">// GameStateMessage.cpp</span></div>
<div class="line"> GamestateMessage::GamestateMessage() : NetworkMessage(NETWORK_MESSAGE_TYPE_GAMESTATE) {</div>
<div class="line">        <a class="code" href="glext_8h.html#aeb776e5e0b0aff9ecb4c615ec0d92452">level</a> = 0;</div>
<div class="line">        gameState = 0;</div>
<div class="line">        payloadLength = 5;</div>
<div class="line"> }</div>
<div class="line"></div>
<div class="line"> GamestateMessage::~GamestateMessage() {</div>
<div class="line"> }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34" title="A signed 32 bit integer.">S32</a> GamestateMessage::encode(<span class="keywordtype">char</span> *<a class="code" href="glext_8h.html#aa3b73d9ca9f2e2396cbeae1ce6ce14be">buf</a>) {</div>
<div class="line">        <span class="comment">// encode into little endian</span></div>
<div class="line">        <a class="code" href="class_battery_tech_1_1_byte_util.html#aa8f9e083280d8622d7d454e652cb46f3">ByteUtil::toBytes</a>(buf, 0, <a class="code" href="glext_8h.html#aeb776e5e0b0aff9ecb4c615ec0d92452">level</a>);</div>
<div class="line">        buf[4] = gameState;</div>
<div class="line">        <span class="keywordflow">return</span> payloadLength;</div>
<div class="line"> }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">void</span> GamestateMessage::decode(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="glext_8h.html#aa3b73d9ca9f2e2396cbeae1ce6ce14be">buf</a>, <a class="code" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34" title="A signed 32 bit integer.">S32</a> <a class="code" href="glext_8h.html#a1499969c13207ed8ab6f796685d4933f">length</a>) {</div>
<div class="line">        <span class="comment">// decode from little endian</span></div>
<div class="line">        <a class="code" href="glext_8h.html#aeb776e5e0b0aff9ecb4c615ec0d92452">level</a> = <a class="code" href="class_battery_tech_1_1_byte_util.html#aeb83c83c23bc44f8061803fb5abd94fb">ByteUtil::fromBytesS32</a>(buf, 0);</div>
<div class="line">        gameState = buf[4];</div>
<div class="line"> }</div>
<div class="line"></div>
<div class="line"> And to create <span class="keyword">this</span> <a class="code" href="glext_8h.html#ab5d4c2bfcb78f279c688575297d42f74">message</a> (and your other <a class="code" href="glext_8h.html#ab5d4c2bfcb78f279c688575297d42f74">message</a> <a class="code" href="glext_8h.html#adadcfe0db01d87c7231f1fafc7cdd49c">types</a>), you will need <a class="code" href="glext_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a> NetworkMessageFactory:</div>
<div class="line"></div>
<div class="line"> <span class="comment">// MyMessageFactory.h</span></div>
<div class="line"> <span class="keyword">class </span>MyMessageFactory: <span class="keyword">public</span> NetworkMessageFactory {</div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">        MyMessageFactory: ();</div>
<div class="line">        <span class="keyword">virtual</span> MyMessageFactory: ();</div>
<div class="line">        <span class="keyword">virtual</span> NetworkMessage* createMessage(<a class="code" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34" title="A signed 32 bit integer.">S32</a> messageType);</div>
<div class="line"> };</div>
<div class="line"></div>
<div class="line"> <span class="comment">// MyMessageFactory.cpp</span></div>
<div class="line"></div>
<div class="line"> MyMessageFactory::MyMessageFactory() {</div>
<div class="line"> }</div>
<div class="line"></div>
<div class="line"> MyMessageFactory::~MyMessageFactory() {</div>
<div class="line"> }</div>
<div class="line"></div>
<div class="line"> NetworkMessage* MyMessageFactory::createMessage(<a class="code" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34" title="A signed 32 bit integer.">S32</a> messageType) {</div>
<div class="line">        <span class="keywordflow">if</span> (messageType == NETWORK_MESSAGE_TYPE_GAMESTATE) {</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">new</span> GamestateMessage();</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="primitives_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4" title="Standard null, suitable for pointers.">NULL</a>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// add more message types here</span></div>
<div class="line"> }</div>
</div><!-- fragment --><p> So if you can see from the code, the MessageFactory instantiates types of messages given by the S32 messageType. This is used by the <a class="el" href="class_battery_tech_1_1_network_manager.html" title="Peer Discovery and Host/Client networking.">NetworkManager</a> to callback to your app with messages received from the network. You simply set the factory by calling:</p>
<div class="fragment"><div class="line"> MyMessageFactory *myMessageFactory = <span class="keyword">new</span> MyMessageFactory();</div>
<div class="line"> context-&gt;<a class="code" href="class_battery_tech_1_1_context.html#a3c0b3694b0b1669c7a310ccbfc377e5e">networkManager</a>-&gt;<a class="code" href="class_battery_tech_1_1_network_manager.html#ac62a12a1049afb312f6676fefa3c50d6" title="Sets the factory that will create messages of user-defined types.">setMessageFactory</a>(myMessageFactory);</div>
</div><!-- fragment --><p>and you will need to delete your message factory on app shutdown as <a class="el" href="class_battery_tech_1_1_network_manager.html" title="Peer Discovery and Host/Client networking.">NetworkManager</a> will not do that for you.</p>
<p>The class <a class="el" href="class_battery_tech_1_1_byte_util.html">ByteUtil</a> is provided to easily convert values to bytes and back. Every 16-64 bit standard type is supported.</p>
<p>MessageFactory only sends TCP data. For more advanced networking, using UDP for high performance, it is recommended that you develop your own messaging engine as there are usually more than one type of message (some critical, some not) and that is beyond the scope of <a class="el" href="namespace_battery_tech.html">BatteryTech</a>. </p>
<pre class="fragment">    * A note on NetworkMessage object pooling
</pre><p>NetworkMessages are pooled by the <a class="el" href="class_battery_tech_1_1_network_manager.html" title="Peer Discovery and Host/Client networking.">NetworkManager</a>. They will always be returned to the message pool automatically after sending or receiving. Just remember: <em>never</em> instantiate your own messages and send them using this <a class="el" href="class_battery_tech_1_1_network_manager.html" title="Peer Discovery and Host/Client networking.">NetworkManager</a>. You will pollute the pool and cause all types of problems. Always use the <a class="el" href="class_battery_tech_1_1_network_manager.html" title="Peer Discovery and Host/Client networking.">NetworkManager</a> <a class="el" href="class_battery_tech_1_1_network_manager.html#af0c84a2015a1c51337c4ea8d662ef332" title="Creates a message to be used to send over the network.">createMessage()</a> function to create a message. Messages will be returned to the pool automatically after being sent. See the following:</p>
<p>// this is the correct way to send a gamestate message to the client: </p>
<div class="fragment"><div class="line"> GamestateMessage *msg = context-&gt;<a class="code" href="class_battery_tech_1_1_context.html#a3c0b3694b0b1669c7a310ccbfc377e5e">networkManager</a>-&gt;<a class="code" href="class_battery_tech_1_1_network_manager.html#af0c84a2015a1c51337c4ea8d662ef332" title="Creates a message to be used to send over the network.">createMessage</a>(NETWORK_MESSAGE_TYPE_GAMESTATE);</div>
<div class="line"> msg-&gt;level = someLevel;</div>
<div class="line"> msg-&gt;gameState = GAMESTATE_GAME_OVER;</div>
<div class="line"> context-&gt;<a class="code" href="class_battery_tech_1_1_context.html#a3c0b3694b0b1669c7a310ccbfc377e5e">networkManager</a>-&gt;<a class="code" href="class_battery_tech_1_1_network_manager.html#aec2cec27974e118ece7879bdc1a46bb7" title="Queues messages to be sent over the network.">sendMessage</a>(msg);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// this is the correct way to handle receiving a message (assuming Game extends NetworkMessageListener)</span></div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">void</span> Game::onNetworkMessage(NetworkMessage* <a class="code" href="glext_8h.html#ab5d4c2bfcb78f279c688575297d42f74">message</a>) {</div>
<div class="line"> <span class="keywordflow">if</span> (message-&gt;messageType == NETWORK_MESSAGE_TYPE_GAMESTATE) {</div>
<div class="line">        GamestateMessage &lt;em&gt;gsMessage = (GamestateMessage&lt;/em&gt;) message;</div>
<div class="line">        getWorld()-&gt;level = gsMessage-&gt;level;</div>
<div class="line">        getWorld()-&gt;gameState = gsMessage-&gt;gameState;</div>
<div class="line"> }</div>
</div><!-- fragment --> </div>
<p><code>#include &lt;<a class="el" href="_network_manager_8h_source.html">batterytech/network/NetworkManager.h</a>&gt;</code></p>

<p><a href="class_battery_tech_1_1_network_manager-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad739e966065eaf217225491579162bc7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#ad739e966065eaf217225491579162bc7">NetworkManager</a> (<a class="el" href="class_battery_tech_1_1_context.html">Context</a> *context)</td></tr>
<tr class="memitem:a1a1fd57ffc7a21aba2c169383b4a8eb6"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#a1a1fd57ffc7a21aba2c169383b4a8eb6">~NetworkManager</a> ()</td></tr>
<tr class="memitem:a10ec39040ec5315e3e42be5e244d29f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#a10ec39040ec5315e3e42be5e244d29f9">startHosting</a> ()</td></tr>
<tr class="memdesc:a10ec39040ec5315e3e42be5e244d29f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">opens a socket and listens for clients  <a href="#a10ec39040ec5315e3e42be5e244d29f9"></a><br/></td></tr>
<tr class="memitem:ac8c776e22bb0ff7da158d9919e6369d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#ac8c776e22bb0ff7da158d9919e6369d1">findHost</a> ()</td></tr>
<tr class="memdesc:ac8c776e22bb0ff7da158d9919e6369d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">scans the network for the host socket and connects  <a href="#ac8c776e22bb0ff7da158d9919e6369d1"></a><br/></td></tr>
<tr class="memitem:a57f27975f5cd6648e4c43e1cc0fe3167"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#a57f27975f5cd6648e4c43e1cc0fe3167">cancelAndClose</a> ()</td></tr>
<tr class="memdesc:a57f27975f5cd6648e4c43e1cc0fe3167"><td class="mdescLeft">&#160;</td><td class="mdescRight">stops hosting/searching/client and closes any and all client connections  <a href="#a57f27975f5cd6648e4c43e1cc0fe3167"></a><br/></td></tr>
<tr class="memitem:a412d0297fa71002f11ce29623fdf6e96"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#a412d0297fa71002f11ce29623fdf6e96">update</a> ()</td></tr>
<tr class="memdesc:a412d0297fa71002f11ce29623fdf6e96"><td class="mdescLeft">&#160;</td><td class="mdescRight">polls network  <a href="#a412d0297fa71002f11ce29623fdf6e96"></a><br/></td></tr>
<tr class="memitem:aec2cec27974e118ece7879bdc1a46bb7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#aec2cec27974e118ece7879bdc1a46bb7">sendMessage</a> (<a class="el" href="class_battery_tech_1_1_network_message.html">NetworkMessage</a> *<a class="el" href="glext_8h.html#ab5d4c2bfcb78f279c688575297d42f74">message</a>)</td></tr>
<tr class="memdesc:aec2cec27974e118ece7879bdc1a46bb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queues messages to be sent over the network.  <a href="#aec2cec27974e118ece7879bdc1a46bb7"></a><br/></td></tr>
<tr class="memitem:af0c84a2015a1c51337c4ea8d662ef332"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_battery_tech_1_1_network_message.html">NetworkMessage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#af0c84a2015a1c51337c4ea8d662ef332">createMessage</a> (<a class="el" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34">S32</a> messageType)</td></tr>
<tr class="memdesc:af0c84a2015a1c51337c4ea8d662ef332"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a message to be used to send over the network.  <a href="#af0c84a2015a1c51337c4ea8d662ef332"></a><br/></td></tr>
<tr class="memitem:aaafe9b6b986ed06f6edeca63342f21a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#aaafe9b6b986ed06f6edeca63342f21a4">setMessageListener</a> (<a class="el" href="class_battery_tech_1_1_network_message_listener.html">NetworkMessageListener</a> *listener)</td></tr>
<tr class="memdesc:aaafe9b6b986ed06f6edeca63342f21a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the message listener.  <a href="#aaafe9b6b986ed06f6edeca63342f21a4"></a><br/></td></tr>
<tr class="memitem:ad2dea02a485e2f38e9451d99124d9bc2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#ad2dea02a485e2f38e9451d99124d9bc2">setStatusListener</a> (<a class="el" href="class_battery_tech_1_1_network_status_listener.html">NetworkStatusListener</a> *listener)</td></tr>
<tr class="memdesc:ad2dea02a485e2f38e9451d99124d9bc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the status listener.  <a href="#ad2dea02a485e2f38e9451d99124d9bc2"></a><br/></td></tr>
<tr class="memitem:ad4063f4de44e449b894a12f812f1cfbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#ad4063f4de44e449b894a12f812f1cfbb">dispatchMessageToListener</a> (<a class="el" href="class_battery_tech_1_1_network_message.html">NetworkMessage</a> *<a class="el" href="glext_8h.html#ab5d4c2bfcb78f279c688575297d42f74">message</a>)</td></tr>
<tr class="memdesc:ad4063f4de44e449b894a12f812f1cfbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatches a message to the message listener.  <a href="#ad4063f4de44e449b894a12f812f1cfbb"></a><br/></td></tr>
<tr class="memitem:a51eec77f4d152696c8b1d79a1c94b13c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#a51eec77f4d152696c8b1d79a1c94b13c">returnToPool</a> (<a class="el" href="class_battery_tech_1_1_network_message.html">NetworkMessage</a> *<a class="el" href="glext_8h.html#ab5d4c2bfcb78f279c688575297d42f74">message</a>)</td></tr>
<tr class="memdesc:a51eec77f4d152696c8b1d79a1c94b13c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a network message to the message pool.  <a href="#a51eec77f4d152696c8b1d79a1c94b13c"></a><br/></td></tr>
<tr class="memitem:ac62a12a1049afb312f6676fefa3c50d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#ac62a12a1049afb312f6676fefa3c50d6">setMessageFactory</a> (<a class="el" href="class_battery_tech_1_1_network_message_factory.html">NetworkMessageFactory</a> *factory)</td></tr>
<tr class="memdesc:ac62a12a1049afb312f6676fefa3c50d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the factory that will create messages of user-defined types.  <a href="#ac62a12a1049afb312f6676fefa3c50d6"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:abc04c81e6fb1dbcb7cda3aa98d1a2e73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_battery_tech_1_1_network_status_listener.html#acc3b6838f688b9fce131b9dfd2c87203">NetworkStatusListener::Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#abc04c81e6fb1dbcb7cda3aa98d1a2e73">status</a></td></tr>
<tr class="memitem:a5e6d8e7f4eb68f0a575bb054914d3e4b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_battery_tech_1_1_network_status_listener.html#acc3b6838f688b9fce131b9dfd2c87203">NetworkStatusListener::Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_battery_tech_1_1_network_manager.html#a5e6d8e7f4eb68f0a575bb054914d3e4b">lastStatus</a></td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad739e966065eaf217225491579162bc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BatteryTech::NetworkManager::NetworkManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_battery_tech_1_1_context.html">Context</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1a1fd57ffc7a21aba2c169383b4a8eb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BatteryTech::NetworkManager::~NetworkManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a57f27975f5cd6648e4c43e1cc0fe3167"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::cancelAndClose </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">              </pre> 
</div>
</div>
<a class="anchor" id="af0c84a2015a1c51337c4ea8d662ef332"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_battery_tech_1_1_network_message.html">NetworkMessage</a> * BatteryTech::NetworkManager::createMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="primitives_8h.html#a7fd0f901ce5fa28f2315830b2c4aea34">S32</a>&#160;</td>
          <td class="paramname"><em>messageType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If you call this, you MUST send the message or there will be a memory leak.<br/>
 This is a pooling mechanism which is also used internally to do message callbacks </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">messageType</td><td>An application-specific message type (you define it yourself for your app) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad4063f4de44e449b894a12f812f1cfbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::dispatchMessageToListener </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_battery_tech_1_1_network_message.html">NetworkMessage</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The message to dispatch </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac8c776e22bb0ff7da158d9919e6369d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::findHost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">              </pre> 
</div>
</div>
<a class="anchor" id="a51eec77f4d152696c8b1d79a1c94b13c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::returnToPool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_battery_tech_1_1_network_message.html">NetworkMessage</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>know what you're doing when you call this! See class docs for more details </p>

</div>
</div>
<a class="anchor" id="aec2cec27974e118ece7879bdc1a46bb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::sendMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_battery_tech_1_1_network_message.html">NetworkMessage</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The message to send </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac62a12a1049afb312f6676fefa3c50d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::setMessageFactory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_battery_tech_1_1_network_message_factory.html">NetworkMessageFactory</a> *&#160;</td>
          <td class="paramname"><em>factory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">factory</td><td>The message factory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aaafe9b6b986ed06f6edeca63342f21a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::setMessageListener </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_battery_tech_1_1_network_message_listener.html">NetworkMessageListener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Incoming network messages will be sent to the listener </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">listener</td><td>The network message listener </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad2dea02a485e2f38e9451d99124d9bc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::setStatusListener </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_battery_tech_1_1_network_status_listener.html">NetworkStatusListener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Network status events will be sent to the listener </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">listener</td><td>The network status listener </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a10ec39040ec5315e3e42be5e244d29f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::startHosting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">              </pre> 
</div>
</div>
<a class="anchor" id="a412d0297fa71002f11ce29623fdf6e96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="glext_8h.html#a3db05964a3cc4410f35b7ea2b7eb850d">void</a> BatteryTech::NetworkManager::update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">              </pre> 
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a5e6d8e7f4eb68f0a575bb054914d3e4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_battery_tech_1_1_network_status_listener.html#acc3b6838f688b9fce131b9dfd2c87203">NetworkStatusListener::Status</a> BatteryTech::NetworkManager::lastStatus</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abc04c81e6fb1dbcb7cda3aa98d1a2e73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_battery_tech_1_1_network_status_listener.html#acc3b6838f688b9fce131b9dfd2c87203">NetworkStatusListener::Status</a> BatteryTech::NetworkManager::status</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>batterytech/network/<a class="el" href="_network_manager_8h_source.html">NetworkManager.h</a></li>
<li>batterytech/network/<a class="el" href="_network_manager_8cpp.html">NetworkManager.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 30 2012 21:27:19 for BatteryTech SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1
</small></address>
</body>
</html>
