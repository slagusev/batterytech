<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BatteryTech Engine: 3D Model Animation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="batterytech_logo_tm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">BatteryTech Engine
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Cross-Platform Game Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">3D Model Animation</div>  </div>
<div class="ingroups"><a class="el" href="group___graphics3_d.html">3D Graphics and Models</a></div></div><!--header-->
<div class="contents">

<p>Using Hardware-accelerated 3D Animation.  
<a href="#details">More...</a></p>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Using Hardware-accelerated 3D Animation. </p>
<p>Bone-Based 3D animation requires initialization of the bones and animation data before any rendering can occur. Animator objects, which reside in <a class="el" href="class_game_object.html">GameObject</a>, are what hold that data. To use an animator, a <a class="el" href="class_game_object.html">GameObject</a> is required like in the following example:</p>
<div class="fragment"><div class="line"> Character = table.copy(<a class="code" href="class_game_object.html">GameObject</a>)</div>
<div class="line"> <span class="keyword">function</span> Character.new()</div>
<div class="line">   <span class="keyword">self</span> = allocMeta(Character.createInstance(), Character)</div>
<div class="line">   <span class="keyword">self</span>:cInit()</div>
<div class="line">   self:anim_allocAnimations(1)</div>
<div class="line">   self:anim_initDynamic(0, &quot;models/Bleep.bai&quot;, nil)</div>
<div class="line">   self.x = 0</div>
<div class="line">   self.y = 0</div>
<div class="line">   self.z = 0</div>
<div class="line">   self.rot = 0</div>
<div class="line">   return self</div>
<div class="line"> end</div>
</div><!-- fragment --><p> Then to update and render with the animator: </p>
<div class="fragment"><div class="line"> <span class="keyword">function</span> Character:update(tickDelta)</div>
<div class="line">   self:anim_interpolate(0, self.animTime)</div>
<div class="line"> end</div>
<div class="line"> function Character:render()</div>
<div class="line">   local scale = 5</div>
<div class="line">   local idx = game:renderAssimp(self, 0, &quot;models/Bleep.bai&quot;, nil, nil, true, self.x,self.y,z, scale,scale,scale, 0,0,self.rot)</div>
<div class="line"> end</div>
</div><!-- fragment --><p>Troubleshooting - enable debug info in batterytech_config.txt for models to see mesh, bones and animation data on import. See <a class="el" href="group___configuring.html">Configuring the Engine</a> for more info </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1c034c6457ee2577f81f77adc7b1c099"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___animation3_d.html#ga1c034c6457ee2577f81f77adc7b1c099">GameObject::anim_allocAnimations</a> (int count)</td></tr>
<tr class="memdesc:ga1c034c6457ee2577f81f77adc7b1c099"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates space to load 3D bone-based animations.  <a href="#ga1c034c6457ee2577f81f77adc7b1c099"></a><br/></td></tr>
<tr class="memitem:gaf3351e328541f536d82cd4f07e7aab2f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___animation3_d.html#gaf3351e328541f536d82cd4f07e7aab2f">GameObject::anim_initDynamic</a> (int idx, string assetName, string meshName)</td></tr>
<tr class="memdesc:gaf3351e328541f536d82cd4f07e7aab2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an animation for a bone-animated model.  <a href="#gaf3351e328541f536d82cd4f07e7aab2f"></a><br/></td></tr>
<tr class="memitem:gad807e5a5e820f6c80c5995d988658fab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___animation3_d.html#gad807e5a5e820f6c80c5995d988658fab">GameObject::anim_interpolate</a> (int idx, float time)</td></tr>
<tr class="memdesc:gad807e5a5e820f6c80c5995d988658fab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interpolates the animation skeleton's bones.  <a href="#gad807e5a5e820f6c80c5995d988658fab"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga1c034c6457ee2577f81f77adc7b1c099"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GameObject::anim_allocAnimations </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates space to load 3D bone-based animations. </p>
<p>All animation allocations will be automatically cleaned up when <a class="el" href="group___game_object.html#gab3a5c1145d984bfffc6542a1c5326623" title="Marks this GameObject to be released from native memory and removed from all references.">GameObject::cDeactivate()</a> is called</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>The number of animation files to allocate for </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaf3351e328541f536d82cd4f07e7aab2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GameObject::anim_initDynamic </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>assetName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>meshName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an animation for a bone-animated model. </p>
<p>This function loads the bone data from a file and prepares to animate and render.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td>The animation index (0 is first) </td></tr>
    <tr><td class="paramname">assetName</td><td>The animation asset's file name </td></tr>
    <tr><td class="paramname">meshName</td><td>(optional) The mesh name of the animation </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad807e5a5e820f6c80c5995d988658fab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GameObject::anim_interpolate </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interpolates the animation skeleton's bones. </p>
<p>This will interpolate the bone transforms between frames to provide a smooth transform for the given time. The time given will need to take the animation's framerate into account. For example, if an animation is done at 24FPS, and and frame 12 is desired, the time would be 0.5</p>
<p>Animations must be allocated with <a class="el" href="group___animation3_d.html#ga1c034c6457ee2577f81f77adc7b1c099" title="Allocates space to load 3D bone-based animations.">GameObject::anim_allocAnimations()</a> and then initialized with <a class="el" href="group___animation3_d.html#gaf3351e328541f536d82cd4f07e7aab2f" title="Initializes an animation for a bone-animated model.">GameObject::anim_initDynamic()</a> before this function can be called. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td>The animation index (0 is first) </td></tr>
    <tr><td class="paramname">time</td><td>The time to interpolate to in seconds </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 30 2012 19:22:22 for BatteryTech Engine by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1
</small></address>
</body>
</html>
